# 题目

给你一个正整数 `n` ，生成一个包含 `1` 到 `n × n` 所有元素，且元素按顺时针顺序螺旋排列的 `n x n` 正方形矩阵 `matrix` 。
# 解题

本题关键在于如何保持循环变量不变并且模拟矩阵排列的过程，可以如下图所示对过程进行拆分：
![[螺旋矩阵II.png]]
我的思路是将排列过程拆分为两个部分进行循环：
- 循环按圈输入数字
- 每圈按照数字输入方向分为四个部分
接下来只需要实现这两部分循环即可模拟数字输入矩阵的过程
## 循环按圈输入数字

此处需要确认循环有多少轮，输入数字为 `n` 表示矩阵 `matrix` 的一条边有 `n` 个元素，那么从最外围到最中心则一共有 $\lfloor (n+1)/2 \rfloor$ 圈，接下来需要对每一圈的数字输入进行思考。
## 每圈按照数字输入方向分为四个部分

如上图所示，一共有四个输入方向，考虑到每次的循环不变量，每个方向输入数字的次数相同，都是当前圈数中同一方向元素个数减一，随着圈数的增加每一圈每个方向需要输入的数字个数会相应的减少，假设当前是输入的第 `round` 圈，那么**每个方向需要输入数字的次数**则为 `n-1-round*2` ，这是因为每完成一圈时，下一圈对应的数字个数都会减少两个。

但是每个数字输入方向中**矩阵位置**和**数字**应该如何确定？数字好确定，从数字1开始，按照模拟顺序每次赋值之后加一即可。但是位置则需要考虑输入的方向，方向一共
### 从左至右

行号：从左至右方向的行号和圈数是一致的（圈数从0开始）。
列号：假设当前循环条件是 `for col := 0; col < n-1-round*2; col++` ，则该方向列号的起始位置为 `round` ，再基于循环次数增加即可。
矩阵赋值位置： `matrix[round][round+col]`
### 从上至下

行号：从上至下的行号是不停变换的，即起始位置 `round` 再加上行号循环变量即可，循环条件为 `for row := 0; row < n-1-round*2; row++` 。
列号：列号固定，基于圈数和矩阵最大列号 `n-1` 确定，具体值为 `n-1-round`。
矩阵赋值位置： `matrix[round+row][n-1-round]
### 从右至左

行号：从最下面一行依次基于圈数递减，行号都为 `n-1-round`。
列号：列号起始位置是从最大列号开始基于圈数递减，每次的列号起始位置为 `n-1-round`，循环条件为 `for col := 0; col < n-1-round*2; col++`，列号为 `n-1-round-col`。
矩阵赋值位置：`matrix[n-1-round][n-1-round-col]`
### 从下至上

行号：初始行号从 `n-1` 开始，之后基于圈数递减，初始行号为 `n-1-round`，循环条件为 `for row := 0; row < n-1-round*2; row++` ，行号不变量为 `n-1-round-row`。
列号：列号与当前圈数相同为 `round`。
矩阵赋值位置：`matrix[n-1-round-row][round]`
## 特殊情况

如果 `n` 为奇数，那么最后一个元素会是单一的一圈，但是各个方向的不等式会因为不满足此判定而无法进入循环进行赋值，因此如果进入当前的数字等于 $n^2$ 则说明最后一个元素是单一一圈，此时直接将 $n^2$ 赋值给 $matrix\lfloor (n+1)/2 \rfloor \lfloor (n+1)/2 \rfloor$ 。